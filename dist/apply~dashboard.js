(window["webpackJsonp"] = window["webpackJsonp"] || []).push([["apply~dashboard"],{

/***/ "./scripts/helpers/blizzard.js":
/*!*************************************!*\
  !*** ./scripts/helpers/blizzard.js ***!
  \*************************************/
/*! exports provided: default */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"default\", function() { return Character; });\nconst apiKey = 'e82qmvhf6egvsqdmpemmps2dskp62teu';\nconst thumbnail = 'https://render-us.worldofwarcraft.com/character/';\nconst defaultAvatar = 'themes/core/images/game/generic/avatar/default.jpg';\nconst genericAvatar = 'https://s3.amazonaws.com/files.enjin.com/1604436/images/unknown.jpg';\nconst slots = ['head', 'neck', 'shoulder', 'back', 'chest', 'shirt', 'wrist', 'hands', 'waist', 'legs', 'feet', 'finger1', 'finger2', 'trinket1', 'trinket2', 'mainHand', 'offHand'];\nconst errorMap = {\n  'BlizzardOutage': 'Blizzard reports this character is temporarily unavailable on the API.',\n  'NoBoth': 'Character was not found on the armory or RaiderIO. It\\'s likely they transferred.',\n  'NoBlizzardYesRaiderIO': 'Character may have transferred. Character is not found on the armory, but is on RaiderIO.',\n  'NoRaiderIO': 'Character was not found on RaiderIO.',\n  'None': ''\n};\n/**\n * @class\n * @classdesc World of Warcraft character.\n * */\n\nclass Character {\n  /**\n   * World of Warcraft character.\n   * @param {Object} data\n   */\n  constructor(data) {\n    this.hash = data.hash;\n    this.name = data.name;\n    this.region = data.region;\n    this.realm = data.realm;\n    this.class = data.type;\n    this.race = data.race;\n    this.level = data.level;\n    this.avatar = data.avatar_url.replace(defaultAvatar, genericAvatar);\n    this.isRemovable = document.querySelector('.m_appform') ? true : false;\n    this.raiderIO = null;\n    this.error = null;\n  }\n  /**\n   * Short circuitable class.\n   */\n\n\n  get characterClass() {\n    if (this.class) {\n      return this.class;\n    } else if (this.raiderIO && this.raiderIO.class) {\n      return this.raiderIO.class;\n    }\n\n    return 'Unknown';\n  }\n  /**\n   * Short circuitable avatar.\n   */\n\n\n  get characterAvatar() {\n    if (this.blizzard && this.blizzard.thumbnail) {\n      return thumbnail + this.blizzard.thumbnail;\n    } else if (this.raiderIO && this.raiderIO.thumbnail_url) {\n      return this.raiderIO.thumbnail_url;\n    } else if (this.avatar) {\n      return this.avatar.replace(defaultAvatar, genericAvatar);\n    } else {\n      return genericAvatar;\n    }\n  }\n  /**\n   * Removes spacing and capitalization of a class for stylesheets.\n   */\n\n\n  get cssCharacterClass() {\n    return this.characterClass.replace(' ', '-').toLowerCase();\n  }\n  /**\n   * Gets Blizzard character API url.\n   */\n\n\n  get blizzardApi() {\n    return 'https://' + this.region + '.api.battle.net/wow/character/' + this.realm + '/' + this.name + '?fields=items,talents&locale=en_US&apikey=' + apiKey;\n  }\n  /**\n   * Gets Raider.io character API url.\n   */\n\n\n  get raiderIOApi() {\n    return 'https://raider.io/api/v1/characters/profile?region=' + this.region + '&realm=' + this.realm + '&name=' + this.name + '&fields=gear,raid_progression,mythic_plus_scores,previous_mythic_plus_scores';\n  }\n  /**\n   * Strips characters which may cause lookup issues with funky realms.\n   */\n\n\n  get formattedRealm() {\n    return this.realm.replace(' ', '-').replace('\\'', '');\n  }\n  /**\n   * Gets character armory url.\n   */\n\n\n  get characterWarcraftURL() {\n    return `https://www.worldofwarcraft.com/en-${this.region}/character/${this.formattedRealm}/${this.name}`;\n  }\n  /**\n   * Detects if the raiderIO profile url is available or creates it.\n   */\n\n\n  get characterRaiderIOURL() {\n    return this.raiderIO.profile_url ? this.raiderIO.profile_url : `https://raider.io/characters/${this.region}/${this.formattedRealm}/${this.name}`;\n  }\n  /**\n   * Gets WarcraftLogs character url.\n   */\n\n\n  get characterWCLURL() {\n    return `https://www.warcraftlogs.com/character/${this.region}/${this.formattedRealm}/${this.name}`;\n  }\n  /**\n   * Creates the character element DOM from object data.\n   */\n\n\n  get characterElement() {\n    return this.characterTemplate;\n  }\n  /**\n   * Constructs HTML for the World of Warcraft character.\n   * This is pretty terse but structurally pleasing and efficient,\n   * unlike my upbringing and current life situations.\n   * @return {Node} panel\n   */\n\n\n  get characterDisplay() {\n    const pane = document.createElement('div');\n    pane.className = 'character class-' + this.formattedClass;\n    pane.setAttribute('data-hash', this.hash);\n    pane.setAttribute('data-access', this.error);\n    const flex = document.createElement('div');\n    flex.className = 'flex-row';\n    pane.appendChild(flex);\n    const info = document.createElement('div');\n    info.className = 'character-info col-12 col-md-2';\n    flex.appendChild(info);\n    const portrait = document.createElement('div');\n    portrait.className = 'character-portrait';\n    info.appendChild(portrait);\n    const img = document.createElement('img');\n    img.className = 'character-portrait__img';\n    img.src = this.avatar;\n    portrait.appendChild(img);\n    const text = document.createElement('div');\n    text.className = 'character-text';\n    info.appendChild(text);\n    const name = document.createElement('div');\n    name.className = 'character-name col-12';\n    name.innerText = this.name;\n    text.appendChild(name);\n    const desc = document.createElement('div');\n    desc.className = 'col-12';\n    desc.innerText = this.race + ' ' + this.characterClass;\n    text.appendChild(desc);\n    const links = document.createElement('ul');\n    links.className = 'character-links';\n    info.appendChild(links);\n    const liFirst = document.createElement('li');\n    const firstHref = document.createElement('a');\n    firstHref.href = 'https://www.worldofwarcraft.com/en-' + this.region + '/character/' + this.formattedRealm + '/' + this.name;\n    firstHref.target = '_blank';\n    const liSecond = document.createElement('li');\n    const liThird = document.createElement('li');\n    links.appendChild(liFirst);\n    links.appendChild(liSecond);\n    links.appendChild(liThird);\n    return pane;\n  }\n  /**\n   * Short-circuiting current scores.\n   */\n\n\n  get characterCurrentScores() {\n    if (this.raiderIO && this.raiderIO.mythic_plus_scores) {\n      return Math.round(this.raiderIO.mythic_plus_scores.all);\n    }\n\n    return 0;\n  }\n  /**\n   * Short-circuiting mythic+ data.\n   */\n\n\n  get previousMythicPlusScores() {\n    if (this.raiderIO && this.raiderIO.previous_mythic_plus_scores) {\n      return Math.round(this.raiderIO.previous_mythic_plus_scores.all);\n    }\n\n    return 0;\n  }\n  /**\n   * Constructs the character display using available data.\n   */\n\n\n  get characterTemplate() {\n    return `\n      <div class=\"character class-${this.cssCharacterClass}\" data-hash=\"${this.hash}\">\n        <div class=\"character-info-block character-info\">\n          <div class=\"character-info__wrapper\">\n            <div class=\"character-portrait\">\n              <img class=\"character-portrait__img\" src=\"${this.characterAvatar}\">\n            </div>\n            <div class=\"character-text\">\n              <div class=\"character-text__name\">${this.name}</div>\n              <div class=\"character-text__info\">${this.race} ${this.characterClass}</div>\n            </div>\n            <ul class=\"character-links\">\n              <li>\n                <a href=\"${this.characterWarcraftURL}\" target=\"_blank\"><img class=\"character-links__img\" width=\"24\" height=\"24\" src=\"https://s3.amazonaws.com/files.enjin.com/632721/material/images/icons/WoW.png\"></a>\n              </li>\n              <li>\n                <a href=\"${this.characterRaiderIOURL}\" target=\"_blank\"><img class=\"character-links__img\" width=\"24\" height=\"24\" src=\"https://s3.amazonaws.com/files.enjin.com/632721/material/images/icons/raiderio.png\"></a>\n              </li>\n              <li>\n                <a href=\"${this.characterWCLURL}\" target=\"_blank\"><img class=\"character-links__img\" width=\"24\" height=\"24\" src=\"https://s3.amazonaws.com/files.enjin.com/632721/material/images/icons/warcraftlogs.png\"></a>\n              </li>\n            </ul>\n            <div class=\"remove-button\">\n              ${this.removeButton}\n            </div>\n          </div>\n        </div>\n        <div class=\"character-info-block character-progression\">\n          <div class=\"character-header\">Recent Progression</div>\n          <div class=\"character-progression-raids\" data-region=\"${this.region}\" data-realm=\"${this.realm}\" data-name=\"${this.name}\">\n            ${this.characterRaidProgression}\n          </div>\n        </div>\n        <div class=\"character-info-block character-group\">\n          <div class=\"character-dungeons\">\n            <div class=\"character-header\">RaiderIO Season Score</div>\n            <div class=\"character-dungeons--wrapper\">\n              <div class=\"character-dungeons--score\">\n                <div class=\"character-dungeons--score__wrapper\">\n                  <span class=\"character-dungeons--score__current-score\">${this.characterCurrentScores}</span>\n                </div>\n                <div class=\"character-dungeons--score__wrapper\">\n                  <span class=\"character-dungeons--score__current-score\">${this.previousMythicPlusScores}</span>\n                </div>\n                <div class=\"character-dungeons--score__title\">Mythic+ Score<br>Current Season</div>\n                <div class=\"character-dungeons--score__title\">Mythic+ Score<br>Last Season</div>\n              </div>\n            </div>\n          </div>\n          <div class=\"character-talents\">\n            <div class=\"character-header\">Talents</div>\n            ${this.characterTalents}\n          </div>\n        </div>\n        <div class=\"character-info-block character-gear\">\n          <div class=\"character-header\">${this.characterEquipped} Equipped Item Level</div>\n          <div class=\"character-gear__amulet\">${this.characterAmulet}</div>\n          ${this.characterGear}\n        </div>\n      </div>\n    `;\n  }\n  /**\n   * Parses character progression.\n   */\n\n\n  get characterRaidProgression() {\n    if (!this.raiderIO || !this.raiderIO.raid_progression) {\n      return `<span class=\"character-error\">Character progression not found.</span>`;\n    }\n\n    let elements = '';\n    Object.keys(this.raiderIO.raid_progression).forEach(raid => {\n      elements += `\n      <div class=\"character-progression__raid\" data-raid=\"${raid}\">\n        <div class=\"character-progression__title\">\n          <span class='character-progression__raid-title'>${raid.replace(/-/g, ' ')}</span>\n          <span class='character-progression__raid-summary'>${this.raiderIO.raid_progression[raid].summary}</span>\n        </div>\n        <div role='progressbar' class='mdc-linear-progress' data-scale=\"${eval(this.raiderIO.raid_progression[raid].summary.slice(0, -2))}\">\n          <div class='mdc-linear-progress__buffering-dots'></div>\n          <div class='mdc-linear-progress__buffer'></div>\n          <div class='mdc-linear-progress__bar mdc-linear-progress__primary-bar'>\n            <span class='mdc-linear-progress__bar-inner'></span>\n          </div>\n        </div>\n      </div>`;\n    });\n    return elements;\n  }\n  /**\n   * Parses character talents.\n   */\n\n\n  get characterTalents() {\n    if (!this.blizzard || !this.blizzard.talents) {\n      return '<span class=\"character-error\">Talent information not available.</span>';\n    }\n\n    let elements = '<div class=\"character-talents__talents\">';\n    const specialization = this.blizzard.talents.find(id => id.selected === true);\n    specialization.talents.forEach(talent => {\n      if (talent) {\n        elements += `\n          <a style='order: ${talent.tier}' class='character-talents-link' href='https://www.wowhead.com/spell=${talent.spell.id}'>\n            <img class='character-talents-img' src='https://render-us.worldofwarcraft.com/icons/56/${talent.spell.icon}.jpg'>\n          </a>`;\n      }\n    });\n    return elements + '</div>';\n  }\n  /**\n   * Parses character amulet.\n   */\n\n\n  get characterEquipped() {\n    if (this.blizzard && this.blizzard.items) {\n      return this.blizzard.items.averageItemLevel;\n    } else if (this.raiderIO && this.raiderIO.gear) {\n      return this.raiderIO.gear.item_level_equipped;\n    } else {\n      return 'Unknown';\n    }\n  }\n  /**\n   * Parses character amulet.\n   */\n\n\n  get characterAmulet() {\n    if (this.blizzard && this.blizzard.items && this.blizzard.items.neck && this.blizzard.items.neck.azeriteItem) {\n      const amulet = this.blizzard.items.neck.azeriteItem;\n      return `<p>Heart of Azeroth level ${amulet.azeriteLevel} and ${Math.floor(amulet.azeriteExperience / amulet.azeriteExperienceRemaining * 100)}%</p>`;\n    }\n\n    return '';\n  }\n  /**\n   * Parses character gear.\n   */\n\n\n  get characterGear() {\n    if (this.blizzard && this.blizzard.items) {\n      const items = this.blizzard.items;\n      let elements = '<div class=\"character-gear-items\">';\n\n      for (const slot of slots) {\n        if (items[slot]) {\n          let args = 'ilvl=' + items[slot].itemLevel + '&amp;';\n\n          if (items[slot].tooltipParams.set) {\n            args += 'pcs=' + items[slot].tooltipParams.set.join(':') + '&amp;';\n          }\n\n          if (items[slot].tooltipParams.enchant) {\n            args += 'ench=' + items[slot].tooltipParams.enchant + '&amp;';\n          }\n\n          if (items[slot].tooltipParams.gem0) {\n            args += 'gems=' + items[slot].tooltipParams.gem0 + '&amp;';\n          }\n\n          elements += `<a class='character-gear-items-item' href='https://www.wowhead.com/item=${items[slot].id}' data-wowhead='${args}' target='_blank'>\n            <img class='character-gear-items-item__img quality-border-${items[slot].quality}' src='https://render-us.worldofwarcraft.com/icons/56/${items[slot].icon}.jpg'>\n        </a>`;\n        }\n      }\n\n      return elements + '</div>';\n    }\n\n    return '<div class=\"character-error\">Character gear is not available.<br>The character probably transferred.</div>';\n  }\n  /**\n   * Returns a string DOM element remove button for the appform.\n   */\n\n\n  get removeButton() {\n    return this.isRemovable ? `<div class=\"col-12\">\n        <button class=\"appform-remove mdc-button mdc-button--raised\" data-hash=\"${this.hash}\" onclick=\"appRemoveCallback(this)\" type=\"button\">\n          Remove\n        </button>\n      </div>` : '';\n  }\n  /**\n   * Asyncronmously waits for all data promises to resolve and links data.\n   * @return {Promise}\n   */\n\n\n  async getData() {\n    const data = await Promise.all([fetch(this.blizzardApi).then(response => response.json()), fetch(this.raiderIOApi).then(response => response.json())].map(p => p.catch(e => e)));\n    this.blizzard = data[0];\n    this.raiderIO = data[1];\n  }\n\n}\n\n//# sourceURL=webpack:///./scripts/helpers/blizzard.js?");

/***/ }),

/***/ "./scripts/helpers/character.js":
/*!**************************************!*\
  !*** ./scripts/helpers/character.js ***!
  \**************************************/
/*! exports provided: cleanCharacterHashes, getWoWCharacters */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"cleanCharacterHashes\", function() { return cleanCharacterHashes; });\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"getWoWCharacters\", function() { return getWoWCharacters; });\n/* harmony import */ var _material_snackbar__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @material/snackbar */ \"../node_modules/@material/snackbar/index.js\");\n/* harmony import */ var _blizzard__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./blizzard */ \"./scripts/helpers/blizzard.js\");\n/* harmony import */ var _helpers_material__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ../helpers/material */ \"./scripts/helpers/material.js\");\n\n\n\nlet characterHashes = [];\n/**\n * Removes known characters.\n */\n\nfunction cleanCharacterHashes() {\n  characterHashes.length = 0;\n}\n/**\n * Handler for remove button in application.\n * @param {button} button\n * @return {false}\n */\n\nfunction appRemoveCallback(button) {\n  const hash = button.dataset.hash;\n  const elem = document.querySelector('.character[data-char=\"' + hash + '\"]');\n  const mask = document.querySelector('.character[data-hash=\"' + hash + '\"]');\n  const snackbar = new _material_snackbar__WEBPACK_IMPORTED_MODULE_0__[\"MDCSnackbar\"](document.querySelector('.mdc-snackbar'));\n\n  if (elem) {\n    elem.querySelector('.remove a').click();\n  }\n\n  if (mask) {\n    mask.remove();\n    characterHashes = characterHashes.filter(e => e !== hash);\n  }\n\n  const snackObj = {\n    message: 'Character destroyed, that was mean.',\n    actionText: 'Neat',\n    actionHandler: false\n  };\n  snackbar.show(snackObj);\n  return false;\n}\n\nwindow.appRemoveCallback = appRemoveCallback;\n/**\n * Adds a loader for the classes found.\n * @param{string} className\n */\n\nfunction injectCharacterLoader(className) {\n  if (className) {\n    className = className.replace(' ', '-').toLowerCase();\n  } else {\n    className = 'unknown';\n  }\n\n  const characterHolder = document.querySelector('.form-question-body');\n  const loader = document.createElement('div');\n  loader.classList = 'character character-loader class-' + className;\n  characterHolder.appendChild(loader);\n}\n/**\n * Finds and parses character data.\n * @return {Object} Character Info.\n */\n\n\nfunction getCharacterData() {\n  const question = document.querySelector('.form-wow-answer');\n\n  if (!question) {\n    return;\n  }\n\n  const isForm = document.querySelector('.m_appform');\n  const isApp = document.querySelector('.v2_system_dashboard');\n\n  if (isForm) {\n    const dataElem = isForm.querySelector('input[type=\"hidden\"]');\n\n    if (dataElem && dataElem.value) {\n      return JSON.parse(dataElem.value);\n    }\n  } else if (isApp) {\n    const dataElem = isApp.querySelector('.character_list');\n\n    if (dataElem && dataElem.dataset.cfg) {\n      return JSON.parse(JSON.parse(dataElem.dataset.cfg).value);\n    }\n  }\n\n  return null;\n}\n/**\n * Uses data found on the application page to create\n * character objects, and gets their data.\n */\n\n\nasync function getWoWCharacters() {\n  const answerParent = document.querySelector('.form-wow-answer');\n\n  if (!answerParent) {\n    return;\n  }\n\n  const answerBody = answerParent.querySelector('.form-question-body');\n  const chars = getCharacterData();\n\n  if (!chars || chars.length === 0) {\n    return;\n  }\n\n  const characters = [];\n\n  for (const hash in chars) {\n    if (!characterHashes.includes(hash)) {\n      injectCharacterLoader(chars[hash].type);\n      characterHashes.push(hash);\n      characters.push(new _blizzard__WEBPACK_IMPORTED_MODULE_1__[\"default\"](chars[hash]));\n    }\n  }\n\n  Promise.all(characters.map(character => character.getData())).then(() => {\n    document.querySelectorAll('.character-loader').forEach(el => {\n      el.classList.add('leaving');\n      window.setTimeout(() => el.remove(), 350);\n    });\n    answerBody.insertAdjacentHTML('beforeend', characters.map(character => character.characterElement).join(''));\n    setTimeout(_helpers_material__WEBPACK_IMPORTED_MODULE_2__[\"animateProgressBars\"], 500);\n  });\n}\n\n//# sourceURL=webpack:///./scripts/helpers/character.js?");

/***/ }),

/***/ "./scripts/helpers/material.js":
/*!*************************************!*\
  !*** ./scripts/helpers/material.js ***!
  \*************************************/
/*! exports provided: animateProgressBars */
/***/ (function(module, __webpack_exports__, __webpack_require__) {

"use strict";
eval("__webpack_require__.r(__webpack_exports__);\n/* harmony export (binding) */ __webpack_require__.d(__webpack_exports__, \"animateProgressBars\", function() { return animateProgressBars; });\n/* harmony import */ var _material_linear_progress__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! @material/linear-progress */ \"../node_modules/@material/linear-progress/index.js\");\n\n/**\n * Uses timeout to avoid reflow hiding our cute animations.\n */\n\nfunction animateProgressBars() {\n  document.querySelectorAll('.mdc-linear-progress').forEach(barElem => {\n    const progress = barElem.getAttribute('data-scale');\n    const bar = new _material_linear_progress__WEBPACK_IMPORTED_MODULE_0__[\"MDCLinearProgress\"](barElem);\n    bar.progress = progress;\n  });\n}\n\n//# sourceURL=webpack:///./scripts/helpers/material.js?");

/***/ })

}]);